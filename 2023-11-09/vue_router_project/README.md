# Vue Router (뷰 라우터)

- vuejs 에서 **페이지 간의 이동을 위한** 공식 라이브러리
- SPA 기반의 페이지를 이동한 것**처럼(=페이지 전환)** 동작
- how? 페이지를 이동을 하게 되면 변경된 요소의 영역에 컴포넌트만 갱신하도록 동작!
- 이러한 화면 이동에 대한 동작을 위해 **라우팅**에 대한 다양한 기능을 제공(일반/충첩/동적 라우팅)

\*_라우팅(routing) : 네트워크 상에서 경로를 선택하는 과정(process)
-> Web App 상에서는 다른 페이지 간의 전환 / 경로 관리하는 방법&기술 총칭!_

### Web App 에서 히스토리 관리

1. **해시 모드**로 관리하는 방법 : URL에다가 해시(#)를 사용하여서 경로를 표기하게 된다. 서버에서 해당되는 path에 대해서 별도의 추가 처리가 필요하지 않게된다!
2. history API 를 사용해서 관리하는 방법 : 서버단에서 **path에 대한 별도 추가처리가 필요**합니다. SEO(검색 엔진 최적화)에 대한 처리가 조금 더 원활해진다

## 라우팅 종류

### 일반 라우팅

**정적인 경로**를 사용하여 라우팅 구성하는 방법

ex) `/about` 경로에는 About 컴포넌트를 맵핑하고, `/contact` 경로에서는 `Contact` 컴포넌트를 맵핑처리할 수 있다. 이러한 경로에 접근하게 되면 단순하게 해당 컴포넌트를 렌더링...

### 동적 라우팅

일부가 동적으로 변경될 수 있는 라우팅을 구성하는 방식이다.

ex) `users/:id` 경로는 `id` 매개변수가 다른 값으로 동적으로 변경될 수 있는 라우팅.

### 중첩 라우팅

간략하게...

# 라우터 네비게이션 가드

다른 라우트로 전환 전에 특정 동작을 수행할 수 있음
(특정 네비게이션을 보호하기 위한 목적!)

ex) 로그인이 필요한 페이지로 접근을 시도할 때, 로그인 여부를 체크하고,
-> 로그인이 되어 있지 않은 경우! 로그인 페이지로 리다이렉트 시키거나, 취소 처리할 수 있음

### 라우터 네비게이션 가드의 종류

- 전역 네비게이션 가드 : 전역 수준에서 모든 라우트 전환 시에 사용되는 네비게이션 가드
- 라우트 네비게이션 가드 : 특정 해당 라우트에 대해서 동작하는 네비게이션 가드
- 컴포넌트 네비게이션 가드 : 특정 해당 컴포넌에 대해서 동작하는 네비게이션 가드

### 전역 네비게이션 가드 (Global Navigation Guards)

전역 네비게이션 가드는 전체 애플리케이션의 라우트 전환에 대해 적용되는 가드

1. `beforeEach` : 각 라우트 전환 직전에 실행되는 가드
2. `beforeResolve` : 각 라우트 전환 후, 컴포넌트 내에서 데이터가 완전히 로드되기 전에 실행되는 가드
3. `afterEach` : 각 라우트 전환 후에 실행되는 마지막 가드

```
const isAdmin = () => true;
const isLogined = () => false;
// 각 라우트 전환 직전에 실행되는 가드
// 보통의 경우에 로그인 정보를 확인하거나,
// 관리자 정보 권한을 확인하는데 사용
router.beforeEach((to, from) => {
  // to : 내가 가려하는 위치(라우트 정보)
  // from : 내가 왔던 위치(라우트 정보)
  // 프로필 페이지로 접근하려고할 때, 이때 로그인이 되어 있지 않다면! 그러면 About 페이지로 이동!
  if (to.name === "profile" && !isLogined()) {
    return { name: "about" };
  } else if (to.name === "admin" && !isAdmin()) {
    return false; // 라우터 이동을 취소...!
  }
});

// 각 라우트 전환 후에 컴포넌트가 완전히 로드되기 직전에 실행하는 가드
router.beforeResolve((to, from, next) => {
  // 데이터 로딩 등의 작업이 완료될 때까지 대기... <-
  // (비동기 네트워크 작업이 완료되기 전까지 컴포넌트 렌더링이 지연 역할로 활용)
  //   loadData().then(() => {
  //     // next({name: '...'})
  //   });
});

// 각 라우트 전환이 완료된 후에 실행되는 마지막 가드
router.afterEach((to, from) => {
  // 페이지가 전환된 후에 실행되는 로그 관련 작업을 주로 수행...
  console.log(to.fullPath);
  console.log(from.fullPath);
});
```

### 라우트 네비게이션 가드(Per-Route Navigation Guards)

해당 특정 라우트에 대해 진입했을 때 실행되는 가드

(\*주의 : **외부 경로에서, 들어왔을 때에만 실행된다** = 매개변수, 쿼리값이 변경되었을 때에는 실행되지 x)

1. `beforeEnter` : 특정 라우트로 전환 전에 발생하는 가드

   {
   path: "/admin",
   name: "admin",
   component: () => import("@/views/AdminView.vue"),
   beforeEnter: (to, from) => {
   console.log("해당 페이지는 어드민 유저만 접근할 수 있어요!");
   },
   },

### 컴포넌트 가드(Component Guard)

특정 컴포넌트에 적용되는 가드.

1. beforeRouteEnter : 특정 컴포넌트 전환 직전에 실행되는 가드
2. beforeRouteLeave : 특정 컴포넌트에서 다른 라우트로 전환되기 전에 실행되는 가드
3. beforeRouteUpdate : 같은 컴포넌트 내에서 동적 링크의 매개변수가 변경되면 라우트 전환할 때에 실행되는 가드
