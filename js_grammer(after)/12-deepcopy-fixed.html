<html>
  <head></head>
  <body>
    <script>
      let person = {
        name: "john",
        age: 20,
        city: "Gumi",
        grades: [100, 100, 100, 98],
      };

      // 객체를 깊은복사로 진행 (Object -> JSON -> Object)
      // const person2 = JSON.parse(JSON.stringify(person));
      // 직접 코드로 deepcopy 함수 15배 정도..!

      // 원시 타입임을 체크하는 함수
      function isPrimitive(value) {
        return typeof value !== "object" || value === null;
      }

      // 재귀형태로 데이터를 순회하면서 복사를 수행하는 함수
      function deepcopy(obj) {
        // 1. 원시 타입의 값이라면 즉시 반환
        if (isPrimitive(obj)) {
          return obj;
        }
        // object 타입인데, Array or Object
        const copyObj = Array.isArray(obj) ? [] : {};
        // 해당 속성을 모두 반복하며 복사 진행
        for (const key in obj) {
          copyObj[key] = deepcopy(obj[key]);
        }
        return copyObj;
      }
      person = { a: { b: { c: { d: { e: "hello:)" } } } } };
      clone_person = deepcopy(person);

      console.log(person);
      console.log(clone_person);
    </script>
  </body>
</html>
